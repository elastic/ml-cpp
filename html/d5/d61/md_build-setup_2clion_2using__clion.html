<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ML C++: Using CLion with &lt;tt&gt;ml-cpp&lt;/tt&gt;</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../ml.ico"/></td>
  <td id="projectalign">
   <div id="projectname">ML C++<span id="projectnumber">&#160;8.15.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Using CLion with &lt;tt&gt;ml-cpp&lt;/tt&gt;</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md3">Installing prerequisites</a><ul><li class="level2"><a href="#autotoc_md4">CLion</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md5">Importing the &lt;tt&gt;ml-cpp&lt;/tt&gt; project</a><ul><li class="level2"><a href="#autotoc_md6">Run/Debug Configuration</a></li>
<li class="level2"><a href="#autotoc_md7">Integration with &lt;tt&gt;clang-format&lt;/tt&gt;</a></li>
<li class="level2"><a href="#autotoc_md8">Integration with &lt;tt&gt;valgrind&lt;/tt&gt;</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="autotoc_md2"></a></p>
<p>Previous versions of <code>ml-cpp</code> provided instructions on how to configure <code>CLion</code> using a compilation database format or a Makefile project. Those methods of integrating <code>CLion</code> with the <code>ml-cpp</code> repository have now been superseded by creating a <code>CMake</code> project. Before proceeding further delete any pre-existing <code>.idea</code> directory from the root of your <code>ml-cpp</code> repository.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Installing prerequisites</h1>
<p>Note: this tutorial assumes that you have installed the correct version of GCC (<a class="el" href="../../d6/d3a/md_build-setup_2linux.html">Linux</a>) or XCode command line tools (<a class="el" href="../../d2/d85/md_build-setup_2macos.html">macOS</a>) installed on your system and it can be accessed by simply calling <code>g++</code> or <code>clang++</code>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
CLion</h2>
<p>For testing and evaluation purposes you can use <a href="https://www.jetbrains.com/clion">30-day trial version of CLion</a> or participate on the <a href="https://www.jetbrains.com/clion/nextversion/">CLion early access program</a>.</p>
<p>You need to install the current <a href="https://www.jetbrains.com/clion/">CLion</a> (version 2021.3.4 or later) with the <code>File Watcher</code> plugin.</p>
<p>You can install plugins either during the initialization dialog, when you first start CLion, or later using the menu <b>Settings / Preferences | Plugins</b>.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Importing the <code>ml-cpp</code> project</h1>
<p>Open <code>CLion</code> and close any existing open project. From the <code>Welcome to CLion</code> screen click on <code>Open</code> and navigate to your <code>ml-cpp</code> repo.</p>
<div class="image">
<img src="../../open_project.png" alt=""/>
<div class="caption">
Open Project</div></div>
    <p>Ensure <code>CMake project</code> is selected and click the <code>OK</code> button. You will be presented with the <code>CLion</code> preferences for the <code>ml-cpp</code> project.</p>
<div class="image">
<img src="../../default_project_config_options.png" alt=""/>
<div class="caption">
Default Configuration Options</div></div>
    <p>By default <code>CLion</code> will opt for generating a <code>Ninja</code> build system. While this is a perfectly valid option, for better compatibility with building from the command line it is preferred to configure <code>CLion</code> to generate <code>Unix Makefiles</code>. To do this either select <code>Unix Makefiles</code> from the <code>Generator</code> drop-down or type <code>-G "Unix Makefiles"</code> in the<code>CMake options</code> field, and add e.g. <code>-j 10</code> to the <code>Build options</code> field. To be consistent with our CI builds set the build type to be <code>RelWithDebInfo</code> which will generate an optimized build with debug symbols. Of course if you have a specific need for it, it is always possible to switch to for another build type such as <code>Debug</code>, although is advisable <b>not</b> to select the <code>Default</code> build type as its behaviour may change in subsequent releases of <code>CLion</code>.</p>
<p>Make sure to leave the <code>Build directory</code> field blank as CLion will automatically determine it based on the build type selected. (You may need to set the <code>CPP_SRC_HOME</code>environment variable in the<code>Environment</code> field if this is missing or incorrect in your environment).</p>
<div class="image">
<img src="../../unix_makefiles_config.png" alt=""/>
<div class="caption">
Unix Makefiles Configuration</div></div>
    <h2><a class="anchor" id="autotoc_md6"></a>
Run/Debug Configuration</h2>
<p><code>CLion</code> integrates so closely with <code>CMake</code> projects that there should be no need for any further configuration to enable <code>Run</code> or <code>Debug</code> targets.</p>
<p>However, one common thing you may want to do is to run an individual test suite or a test case, to do this you can click on <code>Edit Configurations</code> in the drop-down for targets, select the <code>Boost.test</code> that you're interested in and specify any options to the test in the field <b>Program arguments</b>.</p>
<div class="image">
<img src="../../run_debug_configurations.png" alt=""/>
<div class="caption">
Run/Debug Configurations</div></div>
    <p>Of course, in the instance of wanting to run an individual test suite or case it is always possible to do this directly in the IDE. Navigate to the test source file in question and click the green "play" button in the gutter next to the suite or test case name and select the desired option, e.g.</p>
<div class="image">
<img src="../../run_single_test.png" alt=""/>
<div class="caption">
Run Individual Test</div></div>
    <h2><a class="anchor" id="autotoc_md7"></a>
Integration with <code>clang-format</code></h2>
<p>Recent versions of CLion come with integrated support for <code>clang-format</code>. To ensure that <code>clang-format</code> is used in preference to the built-in formatter navigate to Navigate to <b>Settings / Preferences | Tools | clang-format</b> and ensure that <b>Clang-format binary</b> is set to <code>clang-format</code> and that the <b>PATH</b> field is empty. Then navigate to <b>Settings / Preferences | Editor | Code Style</b> and tick <b>Enable ClangFormat with clangd server</b>.</p>
<p>Alternatively, you may wish to set up a File Watcher to invoke <code>clang-format</code> from <b>Settings / Preferences | Tools | File Watchers</b></p>
<p><b>File type:</b> C/C++\ <b>Scope:</b> Project Files\ <b>Program:</b> <code>clang-format</code>\ <b>Arguments:</b> <code>-i $FileName$</code>\ <b>Output paths to refresh:</b> <code>$FileName$</code>\ <b>Working directory</b> <code>$FileDir</code></p><ul class="check">
<li class="checked">Auto-save edited files to trigger the watcher</li>
</ul>
<ul class="check">
<li class="checked">Trigger the watcher on external changes</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Integration with <code>valgrind</code></h2>
<p>Clion has full support for running and analyzing code using the <code>valgrind</code> suite. Valgrind is readily available on most linux distributions but on macOS an experimental build is required </p><div class="fragment"><div class="line">brew install --HEAD https://raw.githubusercontent.com/sowson/valgrind/master/valgrind.rb</div>
</div><!-- fragment --><p>Once installed go to <b>Settings / Preference | Build, Execution, Deployment | Dynamic Analysis Tools | Valgrind</b> and specify the full path to the <code>valgrind</code> executable. In the <code>Analysis options</code> field you may wish to add e.g. </p><div class="fragment"><div class="line">--leak-check=full --leak-resolution=med --track-origins=yes --vgdb=no</div>
</div><!-- fragment --><p> Valgrind<code>can now be used to analyze</code>run` configurations from <b>Run | Run <em>Run Configuration</em> with Valgrind Memcheck</b></p>
<p>For more information and useful screenshots regarding running and debugging, please refer to the following resources: <a href="https://www.jetbrains.com/help/clion/running-applications.html">running</a> and <a href="https://www.jetbrains.com/help/clion/debugging-code.html">debugging</a> your code. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
