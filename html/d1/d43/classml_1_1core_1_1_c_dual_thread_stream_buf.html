<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ML C++: ml::core::CDualThreadStreamBuf Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../ml.ico"/></td>
  <td id="projectalign">
   <div id="projectname">ML C++<span id="projectnumber">&#160;8.15.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d4/da6/namespaceml.html">ml</a></li><li class="navelem"><a class="el" href="../../db/dc5/namespaceml_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf.html">CDualThreadStreamBuf</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d9/dd7/classml_1_1core_1_1_c_dual_thread_stream_buf-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ml::core::CDualThreadStreamBuf Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A stream buffer where reads and writes are processed in different threads.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d2/d52/_c_dual_thread_stream_buf_8h_source.html">CDualThreadStreamBuf.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for ml::core::CDualThreadStreamBuf:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../de/d54/classml_1_1core_1_1_c_dual_thread_stream_buf__inherit__graph.svg" width="227" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for ml::core::CDualThreadStreamBuf:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/dd1/classml_1_1core_1_1_c_dual_thread_stream_buf__coll__graph.svg" width="496" height="290"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac54128c236ad64d63d22dfb3956af989" id="r_ac54128c236ad64d63d22dfb3956af989"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac54128c236ad64d63d22dfb3956af989">CDualThreadStreamBuf</a> (size_t bufferCapacity=<a class="el" href="#a6be0f7a5141992674ddf1fff1335e2d5">DEFAULT_BUFFER_CAPACITY</a>)</td></tr>
<tr class="memdesc:ac54128c236ad64d63d22dfb3956af989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor initialises buffers.  <br /></td></tr>
<tr class="separator:ac54128c236ad64d63d22dfb3956af989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af51bad50ae560a7d50cb67043ac48c4f" id="r_af51bad50ae560a7d50cb67043ac48c4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af51bad50ae560a7d50cb67043ac48c4f">signalEndOfFile</a> ()</td></tr>
<tr class="memdesc:af51bad50ae560a7d50cb67043ac48c4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the end-of-file flag.  <br /></td></tr>
<tr class="separator:af51bad50ae560a7d50cb67043ac48c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8148f54ada564723e8edd5f4bd513afd" id="r_a8148f54ada564723e8edd5f4bd513afd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8148f54ada564723e8edd5f4bd513afd">endOfFile</a> () const</td></tr>
<tr class="memdesc:a8148f54ada564723e8edd5f4bd513afd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the end-of-file flag.  <br /></td></tr>
<tr class="separator:a8148f54ada564723e8edd5f4bd513afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33de8e05f4ea43b0c9e1c12084b12d99" id="r_a33de8e05f4ea43b0c9e1c12084b12d99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33de8e05f4ea43b0c9e1c12084b12d99">signalFatalError</a> ()</td></tr>
<tr class="memdesc:a33de8e05f4ea43b0c9e1c12084b12d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the fatal error flag.  <br /></td></tr>
<tr class="separator:a33de8e05f4ea43b0c9e1c12084b12d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f457ca53612ddc8c98e24037c36c26" id="r_a62f457ca53612ddc8c98e24037c36c26"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62f457ca53612ddc8c98e24037c36c26">hasFatalError</a> () const</td></tr>
<tr class="memdesc:a62f457ca53612ddc8c98e24037c36c26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the fatal error flag.  <br /></td></tr>
<tr class="separator:a62f457ca53612ddc8c98e24037c36c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a6be0f7a5141992674ddf1fff1335e2d5" id="r_a6be0f7a5141992674ddf1fff1335e2d5"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6be0f7a5141992674ddf1fff1335e2d5">DEFAULT_BUFFER_CAPACITY</a></td></tr>
<tr class="separator:a6be0f7a5141992674ddf1fff1335e2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a7bf45eb8b7faa8704233f94cb9142fcc" id="r_a7bf45eb8b7faa8704233f94cb9142fcc"><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7bf45eb8b7faa8704233f94cb9142fcc">showmanyc</a> () override</td></tr>
<tr class="separator:a7bf45eb8b7faa8704233f94cb9142fcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f0f227dfff69eee020af75f12941cdb" id="r_a1f0f227dfff69eee020af75f12941cdb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f0f227dfff69eee020af75f12941cdb">sync</a> () override</td></tr>
<tr class="separator:a1f0f227dfff69eee020af75f12941cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7cb600ea2d61174b96156d87c6858d9" id="r_ab7cb600ea2d61174b96156d87c6858d9"><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7cb600ea2d61174b96156d87c6858d9">xsgetn</a> (char *s, std::streamsize n) override</td></tr>
<tr class="separator:ab7cb600ea2d61174b96156d87c6858d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9454769f30fe97d830babb7ee25de4d" id="r_ac9454769f30fe97d830babb7ee25de4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9454769f30fe97d830babb7ee25de4d">underflow</a> () override</td></tr>
<tr class="separator:ac9454769f30fe97d830babb7ee25de4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d78ef3fe8b8550611e6a7a2cf146e29" id="r_a1d78ef3fe8b8550611e6a7a2cf146e29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d78ef3fe8b8550611e6a7a2cf146e29">pbackfail</a> (int c=traits_type::eof()) override</td></tr>
<tr class="memdesc:a1d78ef3fe8b8550611e6a7a2cf146e29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put character back in the case of backup underflow.  <br /></td></tr>
<tr class="separator:a1d78ef3fe8b8550611e6a7a2cf146e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c2e9c547ab2b4abf8ea9c76d232ee09" id="r_a4c2e9c547ab2b4abf8ea9c76d232ee09"><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c2e9c547ab2b4abf8ea9c76d232ee09">xsputn</a> (const char *s, std::streamsize n) override</td></tr>
<tr class="separator:a4c2e9c547ab2b4abf8ea9c76d232ee09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ef85ed0b4b6efcce62d1d2739bb9a0" id="r_ad3ef85ed0b4b6efcce62d1d2739bb9a0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3ef85ed0b4b6efcce62d1d2739bb9a0">overflow</a> (int c=traits_type::eof()) override</td></tr>
<tr class="separator:ad3ef85ed0b4b6efcce62d1d2739bb9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c2368a6be43ab62822880e9ea6e5d4" id="r_a50c2368a6be43ab62822880e9ea6e5d4"><td class="memItemLeft" align="right" valign="top">std::streampos&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50c2368a6be43ab62822880e9ea6e5d4">seekoff</a> (std::streamoff off, std::ios_base::seekdir way, std::ios_base::openmode which=std::ios_base::in|std::ios_base::out) override</td></tr>
<tr class="separator:a50c2368a6be43ab62822880e9ea6e5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a4ef23915e6d1915caac0c645ae9d479b" id="r_a4ef23915e6d1915caac0c645ae9d479b"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a> = boost::scoped_array&lt;char&gt;</td></tr>
<tr class="memdesc:a4ef23915e6d1915caac0c645ae9d479b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to manage the two buffers.  <br /></td></tr>
<tr class="separator:a4ef23915e6d1915caac0c645ae9d479b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a273914e46f885d6b1a42214b86311ac5" id="r_a273914e46f885d6b1a42214b86311ac5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a273914e46f885d6b1a42214b86311ac5">swapWriteBuffer</a> ()</td></tr>
<tr class="separator:a273914e46f885d6b1a42214b86311ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6764bea6fc641f4b83772b6b4529a018" id="r_a6764bea6fc641f4b83772b6b4529a018"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6764bea6fc641f4b83772b6b4529a018">swapReadBuffer</a> ()</td></tr>
<tr class="separator:a6764bea6fc641f4b83772b6b4529a018"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abfabd04738001e2eb1c6310a7de6fe04" id="r_abfabd04738001e2eb1c6310a7de6fe04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abfabd04738001e2eb1c6310a7de6fe04">m_WriteBuffer</a></td></tr>
<tr class="memdesc:abfabd04738001e2eb1c6310a7de6fe04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer that put functions will write to.  <br /></td></tr>
<tr class="separator:abfabd04738001e2eb1c6310a7de6fe04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc03e5c450fdbfdfa40d0450a7c299a8" id="r_afc03e5c450fdbfdfa40d0450a7c299a8"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc03e5c450fdbfdfa40d0450a7c299a8">m_WriteBufferCapacity</a></td></tr>
<tr class="memdesc:afc03e5c450fdbfdfa40d0450a7c299a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capacity of the write buffer.  <br /></td></tr>
<tr class="separator:afc03e5c450fdbfdfa40d0450a7c299a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c309681f8bb6d41e974ffafbe3a594" id="r_aa9c309681f8bb6d41e974ffafbe3a594"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9c309681f8bb6d41e974ffafbe3a594">m_ReadBuffer</a></td></tr>
<tr class="memdesc:aa9c309681f8bb6d41e974ffafbe3a594"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer that get functions will read from.  <br /></td></tr>
<tr class="separator:aa9c309681f8bb6d41e974ffafbe3a594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab98e28ee9a9070de7347fe632839f94a" id="r_ab98e28ee9a9070de7347fe632839f94a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab98e28ee9a9070de7347fe632839f94a">m_ReadBufferCapacity</a></td></tr>
<tr class="memdesc:ab98e28ee9a9070de7347fe632839f94a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capacity of the read buffer.  <br /></td></tr>
<tr class="separator:ab98e28ee9a9070de7347fe632839f94a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33cc6fc559cea22e84efaab94a4604a5" id="r_a33cc6fc559cea22e84efaab94a4604a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33cc6fc559cea22e84efaab94a4604a5">m_IntermediateBuffer</a></td></tr>
<tr class="memdesc:a33cc6fc559cea22e84efaab94a4604a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer that get functions will read from.  <br /></td></tr>
<tr class="separator:a33cc6fc559cea22e84efaab94a4604a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8103a29ac9c9ceaea4262d9a3c02881b" id="r_a8103a29ac9c9ceaea4262d9a3c02881b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8103a29ac9c9ceaea4262d9a3c02881b">m_IntermediateBufferCapacity</a></td></tr>
<tr class="memdesc:a8103a29ac9c9ceaea4262d9a3c02881b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capacity of the read buffer.  <br /></td></tr>
<tr class="separator:a8103a29ac9c9ceaea4262d9a3c02881b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e747e6695478e31d89018a9c14afb5a" id="r_a3e747e6695478e31d89018a9c14afb5a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e747e6695478e31d89018a9c14afb5a">m_IntermediateBufferEnd</a></td></tr>
<tr class="separator:a3e747e6695478e31d89018a9c14afb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dfb90a64fd4dbd96cdd2d0f6c590f9b" id="r_a2dfb90a64fd4dbd96cdd2d0f6c590f9b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2dfb90a64fd4dbd96cdd2d0f6c590f9b">m_ReadBytesSwapped</a></td></tr>
<tr class="separator:a2dfb90a64fd4dbd96cdd2d0f6c590f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6277f54fcfb29435edb41d269dc2c53e" id="r_a6277f54fcfb29435edb41d269dc2c53e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6277f54fcfb29435edb41d269dc2c53e">m_WriteBytesSwapped</a></td></tr>
<tr class="separator:a6277f54fcfb29435edb41d269dc2c53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa705f2a0e0f701b4d1bcfa8410e70ee" id="r_afa705f2a0e0f701b4d1bcfa8410e70ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d39/classml_1_1core_1_1_c_mutex.html">CMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa705f2a0e0f701b4d1bcfa8410e70ee">m_IntermediateBufferMutex</a></td></tr>
<tr class="memdesc:afa705f2a0e0f701b4d1bcfa8410e70ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">A lock to protect swapping of the buffers and manage blocking when.  <br /></td></tr>
<tr class="separator:afa705f2a0e0f701b4d1bcfa8410e70ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af637aaafae88d73461cc2c8c8cbf5208" id="r_af637aaafae88d73461cc2c8c8cbf5208"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d57/classml_1_1core_1_1_c_condition.html">CCondition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af637aaafae88d73461cc2c8c8cbf5208">m_IntermediateBufferCondition</a></td></tr>
<tr class="memdesc:af637aaafae88d73461cc2c8c8cbf5208"><td class="mdescLeft">&#160;</td><td class="mdescRight">A condition to wait on ing of the buffers and manage blocking when.  <br /></td></tr>
<tr class="separator:af637aaafae88d73461cc2c8c8cbf5208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b83f52f6150b0b25178c70ed03df00" id="r_aa2b83f52f6150b0b25178c70ed03df00"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2b83f52f6150b0b25178c70ed03df00">m_Eof</a></td></tr>
<tr class="separator:aa2b83f52f6150b0b25178c70ed03df00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e253ed0bf7e3833171546bb8ee9410" id="r_a19e253ed0bf7e3833171546bb8ee9410"><td class="memItemLeft" align="right" valign="top">std::atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19e253ed0bf7e3833171546bb8ee9410">m_FatalError</a></td></tr>
<tr class="separator:a19e253ed0bf7e3833171546bb8ee9410"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A stream buffer where reads and writes are processed in different threads. </p>
<p>DESCRIPTION:<br  />
Provides a mechanism for streaming data when content is being generated in one thread and needs to be consumed in another.</p>
<p>Can be useful when streaming includes two expensive operations, such as JSON encoding and compression.</p>
<p>IMPLEMENTATION DECISIONS:<br  />
This class is optimised for the case of one thread writing into it whilst another thread reads from it. It is NOT safe for more than one thread to read from it at the same time, nor for more than one thread to write to it at the same time. To achieve this there is a write buffer, a read buffer and an intermediate buffer. Only access to the intermediate buffer is locked, and this is swapped with the read and write buffers as they underflow or overflow.</p>
<p>The member functions of this class mainly overload the virtual protected members of the std::streambuf class, and hence have names that aren't very Ml-like.</p>
<p>Some members are not overloaded, namely setbuf(), seekpos(), and imbue(), which means the class can't have its buffer changed, isn't seekable, and isn't locale-aware. Also, the <a class="el" href="#a50c2368a6be43ab62822880e9ea6e5d4">seekoff()</a> method is only supported as far as necessary for tellp() and tellg() to work on the connected stream. It just passes input through to output without any transformation and there's no way of going backwards to re-read previous data. One implication is that clients of istreams using this class of buffer should prefer putback() to unget() if they need to return characters to the stream.</p>
<p>See here for the full list of virtual protected members of std::streambuf: <a href="http://www.cplusplus.com/reference/streambuf/streambuf/">http://www.cplusplus.com/reference/streambuf/streambuf/</a> </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a4ef23915e6d1915caac0c645ae9d479b" name="a4ef23915e6d1915caac0c645ae9d479b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef23915e6d1915caac0c645ae9d479b">&#9670;&#160;</a></span>TScopedCharArray</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">ml::core::CDualThreadStreamBuf::TScopedCharArray</a> = boost::scoped_array&lt;char&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to manage the two buffers. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac54128c236ad64d63d22dfb3956af989" name="ac54128c236ad64d63d22dfb3956af989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac54128c236ad64d63d22dfb3956af989">&#9670;&#160;</a></span>CDualThreadStreamBuf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ml::core::CDualThreadStreamBuf::CDualThreadStreamBuf </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>bufferCapacity</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#a6be0f7a5141992674ddf1fff1335e2d5">DEFAULT_BUFFER_CAPACITY</a></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor initialises buffers. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8148f54ada564723e8edd5f4bd513afd" name="a8148f54ada564723e8edd5f4bd513afd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8148f54ada564723e8edd5f4bd513afd">&#9670;&#160;</a></span>endOfFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ml::core::CDualThreadStreamBuf::endOfFile </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the end-of-file flag. </p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a8148f54ada564723e8edd5f4bd513afd_icgraph.svg" width="452" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a62f457ca53612ddc8c98e24037c36c26" name="a62f457ca53612ddc8c98e24037c36c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62f457ca53612ddc8c98e24037c36c26">&#9670;&#160;</a></span>hasFatalError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ml::core::CDualThreadStreamBuf::hasFatalError </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the fatal error flag. </p>

</div>
</div>
<a id="ad3ef85ed0b4b6efcce62d1d2739bb9a0" name="ad3ef85ed0b4b6efcce62d1d2739bb9a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3ef85ed0b4b6efcce62d1d2739bb9a0">&#9670;&#160;</a></span>overflow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ml::core::CDualThreadStreamBuf::overflow </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>c</em></span><span class="paramdefsep"> = </span><span class="paramdefval">traits_type::eof()</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to obtain more space in the write buffer. This is done by swapping it with the intermediate buffer. This may block if no data is available to read in the intermediate buffer. </p>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_ad3ef85ed0b4b6efcce62d1d2739bb9a0_icgraph.svg" width="450" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1d78ef3fe8b8550611e6a7a2cf146e29" name="a1d78ef3fe8b8550611e6a7a2cf146e29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d78ef3fe8b8550611e6a7a2cf146e29">&#9670;&#160;</a></span>pbackfail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ml::core::CDualThreadStreamBuf::pbackfail </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>c</em></span><span class="paramdefsep"> = </span><span class="paramdefval">traits_type::eof()</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put character back in the case of backup underflow. </p>

</div>
</div>
<a id="a50c2368a6be43ab62822880e9ea6e5d4" name="a50c2368a6be43ab62822880e9ea6e5d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50c2368a6be43ab62822880e9ea6e5d4">&#9670;&#160;</a></span>seekoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::streampos ml::core::CDualThreadStreamBuf::seekoff </td>
          <td>(</td>
          <td class="paramtype">std::streamoff</td>          <td class="paramname"><span class="paramname"><em>off</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ios_base::seekdir</td>          <td class="paramname"><span class="paramname"><em>way</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ios_base::openmode</td>          <td class="paramname"><span class="paramname"><em>which</em></span><span class="paramdefsep"> = </span><span class="paramdefval">std::ios_base::in&#160;|&#160;std::ios_base::out</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In a random access stream this would seek to the specified position. This class does not support such seeking, but implements this method allowing a zero byte seek in order to allow tellg() and tellp() to work on the connected stream. </p>

</div>
</div>
<a id="a7bf45eb8b7faa8704233f94cb9142fcc" name="a7bf45eb8b7faa8704233f94cb9142fcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf45eb8b7faa8704233f94cb9142fcc">&#9670;&#160;</a></span>showmanyc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize ml::core::CDualThreadStreamBuf::showmanyc </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get an estimate of the number of characters still to read after an underflow. In the case of this class we return the amount of data in the intermediate buffer. </p>

</div>
</div>
<a id="af51bad50ae560a7d50cb67043ac48c4f" name="af51bad50ae560a7d50cb67043ac48c4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af51bad50ae560a7d50cb67043ac48c4f">&#9670;&#160;</a></span>signalEndOfFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ml::core::CDualThreadStreamBuf::signalEndOfFile </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the end-of-file flag. </p>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_af51bad50ae560a7d50cb67043ac48c4f_cgraph.svg" width="639" height="191"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_af51bad50ae560a7d50cb67043ac48c4f_icgraph.svg" width="458" height="250"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a33de8e05f4ea43b0c9e1c12084b12d99" name="a33de8e05f4ea43b0c9e1c12084b12d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33de8e05f4ea43b0c9e1c12084b12d99">&#9670;&#160;</a></span>signalFatalError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ml::core::CDualThreadStreamBuf::signalFatalError </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the fatal error flag. </p>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a33de8e05f4ea43b0c9e1c12084b12d99_cgraph.svg" width="396" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6764bea6fc641f4b83772b6b4529a018" name="a6764bea6fc641f4b83772b6b4529a018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6764bea6fc641f4b83772b6b4529a018">&#9670;&#160;</a></span>swapReadBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ml::core::CDualThreadStreamBuf::swapReadBuffer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Swap the intermediate buffer with the read buffer. Will block if the intermediate buffer is empty. NB: m_IntermediateBufferMutex MUST be locked when this method is called. </p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a6764bea6fc641f4b83772b6b4529a018_cgraph.svg" width="396" height="191"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a273914e46f885d6b1a42214b86311ac5" name="a273914e46f885d6b1a42214b86311ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a273914e46f885d6b1a42214b86311ac5">&#9670;&#160;</a></span>swapWriteBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ml::core::CDualThreadStreamBuf::swapWriteBuffer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Swap the intermediate buffer with the write buffer. Will block if the intermediate buffer is not empty. NB: m_IntermediateBufferMutex MUST be locked when this method is called. </p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a273914e46f885d6b1a42214b86311ac5_cgraph.svg" width="396" height="191"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a273914e46f885d6b1a42214b86311ac5_icgraph.svg" width="100%" height="487"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a1f0f227dfff69eee020af75f12941cdb" name="a1f0f227dfff69eee020af75f12941cdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f0f227dfff69eee020af75f12941cdb">&#9670;&#160;</a></span>sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ml::core::CDualThreadStreamBuf::sync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Switch the buffers immediately. Effectively this flushes data through with lower latency but also less efficiently. </p>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a1f0f227dfff69eee020af75f12941cdb_cgraph.svg" width="639" height="191"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac9454769f30fe97d830babb7ee25de4d" name="ac9454769f30fe97d830babb7ee25de4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9454769f30fe97d830babb7ee25de4d">&#9670;&#160;</a></span>underflow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ml::core::CDualThreadStreamBuf::underflow </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to obtain more data for the write buffer. This is done by swapping it with the intermediate buffer. This may block if no data is available to read in the intermediate buffer. </p>

</div>
</div>
<a id="ab7cb600ea2d61174b96156d87c6858d9" name="ab7cb600ea2d61174b96156d87c6858d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7cb600ea2d61174b96156d87c6858d9">&#9670;&#160;</a></span>xsgetn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize ml::core::CDualThreadStreamBuf::xsgetn </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>s</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::streamsize</td>          <td class="paramname"><span class="paramname"><em>n</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get up to n characters from the read buffer and store them in the array pointed to by s. </p>

</div>
</div>
<a id="a4c2e9c547ab2b4abf8ea9c76d232ee09" name="a4c2e9c547ab2b4abf8ea9c76d232ee09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c2e9c547ab2b4abf8ea9c76d232ee09">&#9670;&#160;</a></span>xsputn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize ml::core::CDualThreadStreamBuf::xsputn </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>s</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::streamsize</td>          <td class="paramname"><span class="paramname"><em>n</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write up to n characters from the array pointed to by s into the write buffer. </p>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d43/classml_1_1core_1_1_c_dual_thread_stream_buf_a4c2e9c547ab2b4abf8ea9c76d232ee09_cgraph.svg" width="450" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6be0f7a5141992674ddf1fff1335e2d5" name="a6be0f7a5141992674ddf1fff1335e2d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6be0f7a5141992674ddf1fff1335e2d5">&#9670;&#160;</a></span>DEFAULT_BUFFER_CAPACITY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t ml::core::CDualThreadStreamBuf::DEFAULT_BUFFER_CAPACITY</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>By default, the three buffers will initially have this size. They may potentially grow if characters are put back into them. </p>

</div>
</div>
<a id="aa2b83f52f6150b0b25178c70ed03df00" name="aa2b83f52f6150b0b25178c70ed03df00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2b83f52f6150b0b25178c70ed03df00">&#9670;&#160;</a></span>m_Eof</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool ml::core::CDualThreadStreamBuf::m_Eof</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag to indicate end-of-file. When this is set, the reader will receive end-of-file notification once all the buffers are empty. The writer will not be allowed to add any more data. </p>

</div>
</div>
<a id="a19e253ed0bf7e3833171546bb8ee9410" name="a19e253ed0bf7e3833171546bb8ee9410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e253ed0bf7e3833171546bb8ee9410">&#9670;&#160;</a></span>m_FatalError</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_bool ml::core::CDualThreadStreamBuf::m_FatalError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A call to <a class="el" href="#a33de8e05f4ea43b0c9e1c12084b12d99" title="Set the fatal error flag.">signalFatalError()</a> chucks away all currently buffered data and prevents future data being added. </p>

</div>
</div>
<a id="a33cc6fc559cea22e84efaab94a4604a5" name="a33cc6fc559cea22e84efaab94a4604a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33cc6fc559cea22e84efaab94a4604a5">&#9670;&#160;</a></span>m_IntermediateBuffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a> ml::core::CDualThreadStreamBuf::m_IntermediateBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer that get functions will read from. </p>

</div>
</div>
<a id="a8103a29ac9c9ceaea4262d9a3c02881b" name="a8103a29ac9c9ceaea4262d9a3c02881b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8103a29ac9c9ceaea4262d9a3c02881b">&#9670;&#160;</a></span>m_IntermediateBufferCapacity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ml::core::CDualThreadStreamBuf::m_IntermediateBufferCapacity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Capacity of the read buffer. </p>

</div>
</div>
<a id="af637aaafae88d73461cc2c8c8cbf5208" name="af637aaafae88d73461cc2c8c8cbf5208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af637aaafae88d73461cc2c8c8cbf5208">&#9670;&#160;</a></span>m_IntermediateBufferCondition</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d57/classml_1_1core_1_1_c_condition.html">CCondition</a> ml::core::CDualThreadStreamBuf::m_IntermediateBufferCondition</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A condition to wait on ing of the buffers and manage blocking when. </p>

</div>
</div>
<a id="a3e747e6695478e31d89018a9c14afb5a" name="a3e747e6695478e31d89018a9c14afb5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e747e6695478e31d89018a9c14afb5a">&#9670;&#160;</a></span>m_IntermediateBufferEnd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* ml::core::CDualThreadStreamBuf::m_IntermediateBufferEnd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>End of data held in the intermediate buffer. If this points at the beginning of the intermediate buffer, the implication is that the buffer is empty. </p>

</div>
</div>
<a id="afa705f2a0e0f701b4d1bcfa8410e70ee" name="afa705f2a0e0f701b4d1bcfa8410e70ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa705f2a0e0f701b4d1bcfa8410e70ee">&#9670;&#160;</a></span>m_IntermediateBufferMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d39/classml_1_1core_1_1_c_mutex.html">CMutex</a> ml::core::CDualThreadStreamBuf::m_IntermediateBufferMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A lock to protect swapping of the buffers and manage blocking when. </p>

</div>
</div>
<a id="aa9c309681f8bb6d41e974ffafbe3a594" name="aa9c309681f8bb6d41e974ffafbe3a594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c309681f8bb6d41e974ffafbe3a594">&#9670;&#160;</a></span>m_ReadBuffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a> ml::core::CDualThreadStreamBuf::m_ReadBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer that get functions will read from. </p>

</div>
</div>
<a id="ab98e28ee9a9070de7347fe632839f94a" name="ab98e28ee9a9070de7347fe632839f94a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab98e28ee9a9070de7347fe632839f94a">&#9670;&#160;</a></span>m_ReadBufferCapacity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ml::core::CDualThreadStreamBuf::m_ReadBufferCapacity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Capacity of the read buffer. </p>

</div>
</div>
<a id="a2dfb90a64fd4dbd96cdd2d0f6c590f9b" name="a2dfb90a64fd4dbd96cdd2d0f6c590f9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dfb90a64fd4dbd96cdd2d0f6c590f9b">&#9670;&#160;</a></span>m_ReadBytesSwapped</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ml::core::CDualThreadStreamBuf::m_ReadBytesSwapped</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of bytes that have been swapped from the read buffer to the intermediate buffer over the lifetime of this object. Enables tellg() to work on an associated istream. </p>

</div>
</div>
<a id="abfabd04738001e2eb1c6310a7de6fe04" name="abfabd04738001e2eb1c6310a7de6fe04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfabd04738001e2eb1c6310a7de6fe04">&#9670;&#160;</a></span>m_WriteBuffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a4ef23915e6d1915caac0c645ae9d479b">TScopedCharArray</a> ml::core::CDualThreadStreamBuf::m_WriteBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer that put functions will write to. </p>

</div>
</div>
<a id="afc03e5c450fdbfdfa40d0450a7c299a8" name="afc03e5c450fdbfdfa40d0450a7c299a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc03e5c450fdbfdfa40d0450a7c299a8">&#9670;&#160;</a></span>m_WriteBufferCapacity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ml::core::CDualThreadStreamBuf::m_WriteBufferCapacity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Capacity of the write buffer. </p>

</div>
</div>
<a id="a6277f54fcfb29435edb41d269dc2c53e" name="a6277f54fcfb29435edb41d269dc2c53e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6277f54fcfb29435edb41d269dc2c53e">&#9670;&#160;</a></span>m_WriteBytesSwapped</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ml::core::CDualThreadStreamBuf::m_WriteBytesSwapped</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of bytes that have been swapped from the write buffer to the intermediate buffer over the lifetime of this object. Enables tellp() to work on an associated ostream. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/core/<a class="el" href="../../d2/d52/_c_dual_thread_stream_buf_8h_source.html">CDualThreadStreamBuf.h</a></li>
<li>lib/core/<a class="el" href="../../da/d4d/_c_dual_thread_stream_buf_8cc.html">CDualThreadStreamBuf.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
